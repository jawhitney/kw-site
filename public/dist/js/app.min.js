var app=angular.module("kwApp",["ngRoute","paintingsController","pieceController","designController","portfolioService"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/home.html"}).when("/about",{templateUrl:"views/about.html"}).when("/resume-cv",{templateUrl:"views/resume-cv.html"}).when("/portfolio",{templateUrl:"views/portfolio.html",controller:"PaintingsController"}).when("/murals",{templateUrl:"views/murals.html"}).when("/live-paintings",{templateUrl:"views/live-paintings.html"}).when("/design",{templateUrl:"views/design.html",controller:"DesignController"}).when("/purchase",{templateUrl:"views/purchase.html"}).when("/contact",{templateUrl:"views/contact.html"}).when("/piece/:pieceId",{templateUrl:"views/piece.html",controller:"PieceController"}),b.html5Mode(!0)}]),angular.module("designController",["infinite-scroll"]).controller("DesignController",["$scope","Pieces",function(a,b){a.isRetina=window.devicePixelRatio>1?!0:!1,a.predicate="date",a.reverse=!0,a.pieces=[],a.hasPieces=!1,b.getPieces("design").then(function(c){c.posts.forEach(function(c){var d=b.parsePiece(c);a.pieces.push(d)}),a.pieces.length>0&&(a.hasPieces=!0)})}]),angular.module("paintingsController",["infinite-scroll"]).controller("PaintingsController",["$scope","Pieces",function(a,b){function c(a){for(var b in a)if(a[b])return!1;return!0}a.type=[],a.series=[],a.filter={},a.rowOffCanvasClass="row-offcanvas row-offcanvas-right",a.hideMobileFilter=!0,a.isRetina=window.devicePixelRatio>1?!0:!1,a.predicate="date",a.reverse=!0,a.pieces=[],a.hasPieces=!1,b.getPieces("").then(function(c){c.posts.forEach(function(c){var d=b.parsePiece(c);a.pieces.push(d),d.type&&d.type.forEach(function(b){-1===a.type.indexOf(b)&&a.type.push(b)}),d.series&&d.series.forEach(function(b){-1===a.series.indexOf(b)&&a.series.push(b)})}),a.pieces.length>0&&(a.hasPieces=!0)}),a.toggleFilter=function(){var b="row-offcanvas row-offcanvas-right";a.hideMobileFilter?(a.rowOffCanvasClass=b+" active",a.hideMobileFilter=!1):(a.rowOffCanvasClass=b,a.hideMobileFilter=!0)},a.filterByProperties=function(b){var d=!0;for(var e in a.filter)if(!c(a.filter[e]))if(0!==b[e].length){if(b[e].length>0&&!a.filter[e][b[e]]){if(!angular.isArray(b[e])){d=!1;break}for(var f in b[e]){if(a.filter[e][b[e][f]]){d=!0;break}d=!1}}}else d=!1;return d},a.nextPageDisabledClass=function(){return a.filtered&&a.pieces?a.filtered.length<a.itemsPerPage?"ng-hide":"":void 0}}]),angular.module("pieceController",[]).controller("PieceController",["$scope","$routeParams","Pieces",function(a,b,c){a.isRetina=window.devicePixelRatio>1?!0:!1,a.piece=[],c.getPieces("",b.pieceId).then(function(b){a.piece.push(c.parsePiece(b.post))})}]),function(a){a(document).ready(function(){a(".navbar-brand").on("click",function(){a(".navbar-collapse").is(":visible")&&a(".navbar-toggle").is(":visible")&&a(".navbar-collapse").collapse("toggle")}),a(".navbar a").on("click",function(){a(".navbar-nav li").removeClass("active"),a(this).hasClass("navbar-brand")||(a(".navbar-toggle").is(":visible")&&a(".navbar-collapse").collapse("toggle"),a(this).parent().addClass("active"))})})}(jQuery),angular.module("portfolioService",[]).factory("Pieces",["$q","$http",function(a,b){return{getPieces:function(c,d){var e=a.defer(),f="http://jonathanwhitney.net/kw/?json=";return f+=d?"get_post&post_id="+d:""!==c?"get_category_posts&slug="+c:"get_posts",f="dist/json/kw-data.json",b.get(f,{cache:"true"}).success(function(a){e.resolve(a)}),e.promise},parsePiece:function(a){var b={};return b.id=a.id,b.title=a.title,b.date=a.date,b.type=[],a.categories.forEach(function(a){b.type.push(a.title)}),b.series=[],a.tags.forEach(function(a){b.series.push(a.title)}),b.medium=a.custom_fields.medium[0],b.width=a.custom_fields.width[0],b.height=a.custom_fields.height[0],b.description=a.custom_fields.description[0],b.images={},a.attachments.forEach(function(c){c.id.toString()===a.custom_fields.thumbnail[0]&&(b.images.thumbnail=c.url),c.id.toString()===a.custom_fields.thumbnail_retina[0]&&(b.images.thumbnailRetina=c.url),c.id.toString()===a.custom_fields.full[0]&&(b.images.full=c.url),c.id.toString()===a.custom_fields.full_retina[0]&&(b.images.fullRetina=c.url)}),b}}}]);